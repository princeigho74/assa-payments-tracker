<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASSA Payment Tracker - 2006 Set</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }

        .stat-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .table-row:hover {
            background-color: #f9fafb;
        }

        .modal-backdrop {
            backdrop-filter: blur(4px);
        }

        @media print {
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const SearchIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
        );

        const PlusIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const XIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const CheckIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const DollarIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
        );

        const UsersIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const DownloadIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const AssaPaymentTracker = () => {
            const initialPayments = [
                { id: 1, memberName: 'Oghifo Matthew', month: 'January-December 2025', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 2, memberName: 'Diemuodeke Erhuvwu', month: 'January-December 2025', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 3, memberName: 'Sylvester Asore', month: 'January 2025-December 2026', amount: 12000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 4, memberName: 'Mr Inweh Andrew (President)', month: 'January-December 2025', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 5, memberName: 'Rowena Erhinyodavwe', month: 'January-December (2 years)', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 6, memberName: 'Mrs Dafiaghor Igho', month: 'January-February 2025', amount: 1000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 7, memberName: 'Asama Joshua', month: 'January-December 2025', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 8, memberName: 'Mr Eguono Robinson Okpubuluku', month: 'January-December 2025', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 9, memberName: 'Mr Solomon Okpokpotohor', month: 'January 2025', amount: 500, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' },
                { id: 10, memberName: 'Mr Destiny Emurotu', month: 'January-December 2025', amount: 6000, paymentDate: '2025-01-01', paymentMethod: 'Bank Transfer' }
            ];

            // Load payments from localStorage or use initial data
            const loadPayments = () => {
                const saved = localStorage.getItem('assaPayments');
                if (saved) {
                    return JSON.parse(saved);
                }
                return initialPayments;
            };

            const [payments, setPayments] = useState(loadPayments());

            // Save to localStorage whenever payments change
            React.useEffect(() => {
                localStorage.setItem('assaPayments', JSON.stringify(payments));
            }, [payments]);
            const [showForm, setShowForm] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterMonth, setFilterMonth] = useState('');
            const [sortBy, setSortBy] = useState('date');

            const [formData, setFormData] = useState({
                memberName: '',
                month: '',
                amount: '',
                paymentDate: '',
                paymentMethod: 'Bank Transfer'
            });

            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];

            const paymentMethods = ['Bank Transfer', 'Cash', 'Mobile Money', 'Cheque'];

            const handleInputChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const handleSubmit = () => {
                if (!formData.memberName || !formData.month || !formData.amount || !formData.paymentDate) {
                    alert('Please fill in all fields');
                    return;
                }

                const newPayment = {
                    id: Date.now(),
                    ...formData,
                    amount: parseFloat(formData.amount)
                };
                setPayments([...payments, newPayment]);
                setFormData({
                    memberName: '',
                    month: '',
                    amount: '',
                    paymentDate: '',
                    paymentMethod: 'Bank Transfer'
                });
                setShowForm(false);
            };

            const filteredAndSortedPayments = useMemo(() => {
                let filtered = payments.filter(payment => {
                    const matchesSearch = payment.memberName.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesMonth = filterMonth === '' || payment.month.includes(filterMonth);
                    return matchesSearch && matchesMonth;
                });

                filtered.sort((a, b) => {
                    if (sortBy === 'date') {
                        return new Date(b.paymentDate) - new Date(a.paymentDate);
                    } else if (sortBy === 'amount') {
                        return b.amount - a.amount;
                    } else if (sortBy === 'name') {
                        return a.memberName.localeCompare(b.memberName);
                    }
                    return 0;
                });

                return filtered;
            }, [payments, searchTerm, filterMonth, sortBy]);

            const stats = useMemo(() => {
                const totalAmount = payments.reduce((sum, p) => sum + p.amount, 0);
                const uniqueMembers = new Set(payments.map(p => p.memberName)).size;
                const totalMembers = 150;
                const unpaidMembers = totalMembers - uniqueMembers;

                return {
                    totalAmount,
                    paidMembers: uniqueMembers,
                    unpaidMembers,
                    totalMembers
                };
            }, [payments]);

            const deletePayment = (id) => {
                if (confirm('Are you sure you want to delete this payment record?')) {
                    setPayments(payments.filter(p => p.id !== id));
                }
            };

            const exportData = () => {
                const csvContent = [
                    ['Member Name', 'Month', 'Amount', 'Payment Date', 'Payment Method'],
                    ...payments.map(p => [p.memberName, p.month, p.amount, p.paymentDate, p.paymentMethod])
                ].map(row => row.join(',')).join('\n');

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'assa-payments-2006-set.csv';
                a.click();
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-green-50 to-white">
                    <div className="gradient-bg text-white shadow-lg">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                            <div className="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                                <div>
                                    <h1 className="text-3xl font-bold">ASSA Payment Tracker - 2006 Set</h1>
                                    <p className="text-green-100 mt-1">Afiesere Secondary School Old Students Association</p>
                                    <p className="text-green-200 text-sm mt-1">₦500 Monthly Dues for 2025</p>
                                </div>
                                <button
                                    onClick={() => setShowForm(true)}
                                    className="no-print bg-white text-green-600 px-6 py-3 rounded-lg font-semibold hover:bg-green-50 transition-all duration-200 flex items-center gap-2 shadow-md hover:shadow-lg"
                                >
                                    <PlusIcon />
                                    Add Payment
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div className="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-gray-500 text-sm font-medium">Total Collected</p>
                                        <p className="text-2xl font-bold text-gray-800 mt-1">₦{stats.totalAmount.toLocaleString()}</p>
                                    </div>
                                    <div className="bg-green-100 p-3 rounded-lg">
                                        <div className="text-green-600"><DollarIcon /></div>
                                    </div>
                                </div>
                            </div>

                            <div className="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-gray-500 text-sm font-medium">Paid Members</p>
                                        <p className="text-2xl font-bold text-gray-800 mt-1">{stats.paidMembers}</p>
                                    </div>
                                    <div className="bg-blue-100 p-3 rounded-lg">
                                        <div className="text-blue-600"><CheckIcon /></div>
                                    </div>
                                </div>
                            </div>

                            <div className="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-red-500">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-gray-500 text-sm font-medium">Unpaid Members</p>
                                        <p className="text-2xl font-bold text-gray-800 mt-1">{stats.unpaidMembers}</p>
                                    </div>
                                    <div className="bg-red-100 p-3 rounded-lg">
                                        <div className="text-red-600"><XIcon /></div>
                                    </div>
                                </div>
                            </div>

                            <div className="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-gray-500 text-sm font-medium">Total Members</p>
                                        <p className="text-2xl font-bold text-gray-800 mt-1">{stats.totalMembers}</p>
                                    </div>
                                    <div className="bg-purple-100 p-3 rounded-lg">
                                        <div className="text-purple-600"><UsersIcon /></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="no-print bg-white rounded-xl shadow-md p-6 mb-6">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div className="relative">
                                    <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                        <SearchIcon />
                                    </div>
                                    <input
                                        type="text"
                                        placeholder="Search member..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                    />
                                </div>

                                <select
                                    value={filterMonth}
                                    onChange={(e) => setFilterMonth(e.target.value)}
                                    className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                >
                                    <option value="">All Months</option>
                                    {months.map(month => (
                                        <option key={month} value={month}>{month}</option>
                                    ))}
                                </select>

                                <select
                                    value={sortBy}
                                    onChange={(e) => setSortBy(e.target.value)}
                                    className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                >
                                    <option value="date">Sort by Date</option>
                                    <option value="amount">Sort by Amount</option>
                                    <option value="name">Sort by Name</option>
                                </select>

                                <button
                                    onClick={exportData}
                                    className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center justify-center gap-2"
                                >
                                    <DownloadIcon />
                                    Export Data
                                </button>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-md overflow-hidden">
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead className="gradient-bg text-white">
                                        <tr>
                                            <th className="px-6 py-4 text-left text-sm font-semibold">Member Name</th>
                                            <th className="px-6 py-4 text-left text-sm font-semibold">Month/Period</th>
                                            <th className="px-6 py-4 text-left text-sm font-semibold">Amount</th>
                                            <th className="px-6 py-4 text-left text-sm font-semibold">Payment Date</th>
                                            <th className="px-6 py-4 text-left text-sm font-semibold">Method</th>
                                            <th className="no-print px-6 py-4 text-left text-sm font-semibold">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-gray-200">
                                        {filteredAndSortedPayments.length === 0 ? (
                                            <tr>
                                                <td colSpan="6" className="px-6 py-12 text-center text-gray-500">
                                                    <div className="flex flex-col items-center">
                                                        <UsersIcon size={48} />
                                                        <p className="text-lg mt-4">No payment records found</p>
                                                        <p className="text-sm mt-2">Add your first payment to get started</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        ) : (
                                            filteredAndSortedPayments.map((payment) => (
                                                <tr key={payment.id} className="table-row">
                                                    <td className="px-6 py-4 text-sm font-medium text-gray-900">{payment.memberName}</td>
                                                    <td className="px-6 py-4 text-sm text-gray-600">{payment.month}</td>
                                                    <td className="px-6 py-4 text-sm font-semibold text-green-600">₦{payment.amount.toLocaleString()}</td>
                                                    <td className="px-6 py-4 text-sm text-gray-600">{new Date(payment.paymentDate).toLocaleDateString()}</td>
                                                    <td className="px-6 py-4 text-sm">
                                                        <span className="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">
                                                            {payment.paymentMethod}
                                                        </span>
                                                    </td>
                                                    <td className="no-print px-6 py-4 text-sm">
                                                        <button
                                                            onClick={() => deletePayment(payment.id)}
                                                            className="text-red-600 hover:text-red-800 transition-colors"
                                                        >
                                                            <XIcon size={18} />
                                                        </button>
                                                    </td>
                                                </tr>
                                            ))
                                        )}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-md p-6 mt-6 border-l-4 border-green-500">
                            <h3 className="text-lg font-bold text-gray-800 mb-4">Payment Information</h3>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <p className="text-gray-500 font-medium mb-1">Bank Name</p>
                                    <p className="text-gray-800 font-bold text-lg">UBA</p>
                                </div>
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <p className="text-gray-500 font-medium mb-1">Account Number</p>
                                    <p className="text-gray-800 font-bold text-lg">2278735875</p>
                                </div>
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <p className="text-gray-500 font-medium mb-1">Account Name</p>
                                    <p className="text-gray-800 font-bold text-lg">Afiesere Old Class 2006 Set</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {showForm && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-xl shadow-2xl max-w-md w-full p-8 relative">
                                <button
                                    onClick={() => setShowForm(false)}
                                    className="absolute top-4 right-4 text-gray-400 hover:text-gray-600"
                                >
                                    <XIcon size={24} />
                                </button>

                                <h2 className="text-2xl font-bold text-gray-800 mb-6">Add New Payment</h2>

                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Member Name</label>
                                        <input
                                            type="text"
                                            name="memberName"
                                            value={formData.memberName}
                                            onChange={handleInputChange}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                            placeholder="Enter member name"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Month/Period</label>
                                        <input
                                            type="text"
                                            name="month"
                                            value={formData.month}
                                            onChange={handleInputChange}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                            placeholder="e.g., January 2025 or January-December 2025"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Amount (₦)</label>
                                        <input
                                            type="number"
                                            name="amount"
                                            value={formData.amount}
                                            onChange={handleInputChange}
                                            min="0"
                                            step="0.01"
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                            placeholder="Enter amount"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Payment Date</label>
                                        <input
                                            type="date"
                                            name="paymentDate"
                                            value={formData.paymentDate}
                                            onChange={handleInputChange}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Payment Method</label>
                                        <select
                                            name="paymentMethod"
                                            value={formData.paymentMethod}
                                            onChange={handleInputChange}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        >
                                            {paymentMethods.map(method => (
                                                <option key={method} value={method}>{method}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <button
                                        onClick={handleSubmit}
                                        className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200 mt-6"
                                    >
                                        Add Payment Record
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<AssaPaymentTracker />, document.getElementById('root'));
    </script>
</body>
</html>
